///////////////////////////////////////////////////////////////////////////////
/// @file   Common.hpp
/// @author Jacob Adkins (jpadkins)
/// @brief  Defines commonly used macros and interfaces
///////////////////////////////////////////////////////////////////////////////

#ifndef ROGUELIKE__COMMON_HPP
#define ROGUELIKE__COMMON_HPP

///////////////////////////////////////////////////////////////////////////////
/// Headers
///////////////////////////////////////////////////////////////////////////////

#include <iostream>

#include <unordered_map>
#include <SFML/Graphics.hpp>

///////////////////////////////////////////////////////////////////////////////
/// Logging
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
/// @brief Logs an informational message
///
/// @param msg  Message to log
///////////////////////////////////////////////////////////////////////////////
#define log_info(msg) std::clog << "[EXIT]["    \
    << __FILE__ << "]["                         \
    << __func__ << "]["                         \
    << __LINE__ << "]: "                        \
    << (msg) << std::endl;

///////////////////////////////////////////////////////////////////////////////
/// @brief Logs a message indicating a recoverable runtime error
///
/// @param msg  Message to log
///////////////////////////////////////////////////////////////////////////////
#define log_warn(msg) std::cerr << "[EXIT]["    \
    << __FILE__ << "]["                         \
    << __func__ << "]["                         \
    << __LINE__ << "]: "                        \
    << (msg) << std::endl;

///////////////////////////////////////////////////////////////////////////////
/// @brief Logs a message indicating a programming error
///
/// std::exit(-1) is called after the message is logged.
///
/// @param msg  Message to log
///////////////////////////////////////////////////////////////////////////////
#define log_exit(msg) std::cerr << "[EXIT]["    \
    << __FILE__ << "]["                         \
    << __func__ << "]["                         \
    << __LINE__ << "]: "                        \
    << (msg) << std::endl;                      \
    std::exit(-1);                              \

///////////////////////////////////////////////////////////////////////////////
/// Misc
///////////////////////////////////////////////////////////////////////////////
#define UNUSED(x) (void)x

///////////////////////////////////////////////////////////////////////////////
/// Interfaces
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//// @brief Shorter equivalent to a common multiple inheritance
///////////////////////////////////////////////////////////////////////////////
class DrawAndTransform : public sf::Drawable, public sf::Transformable {
public:

    ///////////////////////////////////////////////////////////////////////////
    /// @brief Returns true if the current mouse position is within the object
    ///
    /// @return True if the mouse is within the object, false otherwise
    ///////////////////////////////////////////////////////////////////////////
    virtual bool containsMouse() const = 0;

    ///////////////////////////////////////////////////////////////////////////
    /// @brief Returns true if a coord is contained within the object
    ///
    /// @param position Location in frame-space to check if the object contains
    ///
    /// @return True if the coord is within the object, false otherwise
    ///////////////////////////////////////////////////////////////////////////
    virtual bool containsPosition(const sf::Vector2i& position) const = 0;

    ///////////////////////////////////////////////////////////////////////////
    /// @brief Updates the position to mirror the last mouse position delta
    ///////////////////////////////////////////////////////////////////////////
    virtual void matchLastMouseMovement();
};

#endif
